<!DOCTYPE html>
<html>
<head>
<title>Aakashvaani.AI ğŸ™ï¸</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
    font-family: sans-serif;
    background: #111;
    color: white;
    text-align: center;
    padding: 20px;
}

textarea {
    width: 100%;
    height: 150px;
    background: #222;
    color: white;
    padding: 10px;
    border-radius: 5px;
    border: none;
    font-size: 16px;
}

button {
    padding: 10px;
    margin: 6px;
    font-size: 16px;
    background: #00ff88;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

audio {
    margin-top: 20px;
    width:100%;
}
</style>
</head>

<body>

<h1>ğŸ™ï¸ Aakashvaani.AI</h1>
<p>Free Hindi Voice Generator</p>

<form id="voiceForm">
    <textarea id="textInput" placeholder="Yahan text likho..."></textarea>
    <br>
    <button type="submit">Generate Voice ğŸ”¥</button>
    <button type="button" id="retryBtn" style="display:none;">Retry ğŸ”„</button>
</form>

<div id="audioContainer"></div>

<script>
let previousText = "";

const form = document.getElementById("voiceForm");
const retryBtn = document.getElementById("retryBtn");

async function generateAudio(text){
    previousText = text;
    retryBtn.style.display = "block";

    const formData = new FormData();
    formData.append("text", text);

    const res = await fetch("/tts", {method: "POST", body: formData});
    const data = await res.json();

    if(data.audio){
        const container = document.getElementById("audioContainer");
        container.innerHTML = `
            <h3>Preview ğŸ§</h3>
            <audio controls autoplay>
                <source src="${data.audio}" type="audio/mpeg">
            </audio>
            <br><br>
            <a href="${data.audio}" download>
                <button>Download MP3 â¬‡</button>
            </a>
        `;
    } else {
        alert("Error: " + data.error);
    }
}

form.addEventListener("submit", (e)=>{
    e.preventDefault();
    const text = document.getElementById("textInput").value;
    generateAudio(text);
});

retryBtn.addEventListener("click", ()=>{
    if(previousText){
        document.getElementById("textInput").value = previousText;
        generateAudio(previousText);
    }
});
</script>

</body>
</html>
